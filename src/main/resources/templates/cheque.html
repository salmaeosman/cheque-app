<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Ch√®que</title>
    <style>
        .cheque {
            width: 1000px;
            height: 450px;
            margin: auto;
            background-image: url('/images/cheque_bg.png');
            background-size: cover;
            background-repeat: no-repeat;
            position: relative;
            font-family: Arial, sans-serif;
        }

        .field {
            position: absolute;
            font-weight: bold;
            font-size: 16px;
            color: #000;
            white-space: nowrap;
        }

        .montant-chiffres {
            top: 40px;
            right: 140px;
        }

        .montant-lettres-ligne1 {
            top: 100px;
            left: 440px;
            width: 700px;
            font-size: 15px;
            white-space: normal;
        }

        .montant-lettres-ligne2 {
            top: 135px;
            left: 200px;
            width: 700px;
            font-size: 15px;
            white-space: normal;
        }

        .montant-lettres-arabe-ligne1 {
            top: 40px;
            right: 2px;
            width: 700px;
            font-size: 15px;
            white-space: normal;
            direction: rtl;
            text-align: right;
        }

        .montant-lettres-arabe-ligne2 {
            top: 65px;
            right: 270px;
            width: 700px;
            font-size: 15px;
            white-space: normal;
            direction: rtl;
            text-align: right;
        }

        .nom {
            top: 168px;
            left: 200px;
            font-size: 17px;
        }
    </style>
</head>
<body>
<div class="cheque">
    <div class="field montant-chiffres" th:text="${#numbers.formatDecimal(montant, 1, 'COMMA', 2, 'POINT')}"></div>

    <div id="ligne1" class="field montant-lettres-ligne1" th:text="${montantLettre}"></div>
    <div id="ligne2" class="field montant-lettres-ligne2"></div>
    <div class="field nom" th:text="${client.nom + ' ' + client.prenom}"></div>
    <div class="field" style="top: 200px; left: 200px;" th:text="${cheque.nomCheque}"></div>
    <div class="field" style="top: 230px; left: 200px;" th:text="${cheque.ville}"></div>
    <div class="field" style="top: 260px; left: 200px;" th:text="${cheque.date}"></div>
    <div class="field" style="top: 300px; left: 200px;" th:text="${cheque.serieNo}"></div>
</div>

<script>
    window.addEventListener('DOMContentLoaded', () => {
        const maxCharsFr = 60;
        const maxCharsAr = 55;

        function splitText(id1, id2, maxChars) {
            const el1 = document.getElementById(id1);
            const el2 = document.getElementById(id2);
            const fullText = el1.textContent.trim();
            if (fullText.length > maxChars) {
                const words = fullText.split(' ');
                let line1 = '', line2 = '';
                for (let word of words) {
                    if ((line1 + ' ' + word).trim().length <= maxChars) {
                        line1 += ' ' + word;
                    } else {
                        line2 += ' ' + word;
                    }
                }
                el1.textContent = line1.trim();
                el2.textContent = line2.trim();
            } else {
                el2.textContent = '';
            }
        }

        splitText('ligne1', 'ligne2', maxCharsFr);
        splitText('arLigne1', 'arLigne2', maxCharsAr);
    });
</script>
</body>
</html>